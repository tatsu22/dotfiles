bind r source-file ~/.tmux.conf \; display "Reloaded!"

# unbind C-Space
# set -g prefix C-Space
# bind C-Space send-prefix

# bind \` switch-client -t'{marked}'

bind | split-window -h
bind - split-window -v
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
unbind '"'
unbind %

### Status Bar
set-option -g status-position top

# set -g status-style 'fg=colour1'
# setw -g window-status-current-style 'fg=colour0 bg=colour1'
# setw -g window-status-current-format ' #I #W #F '
# setw -g window-status-format ' #I #[fg=colour6]#W #[fg=colour1]#F '

# terminal color fixes
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"
set -sg terminal-overrides ",*:RGB"

set -g mouse on

# Find folder
bind-key -r f run-shell "tmux neww ~/.local/scripts/tmux-sessionizer"

# Shortcuts to common folders
# bind-key -r D run-shell "~/.local/scripts/tmux-sessionizer ~/vault/"

# New window in background
bind-key -r C new-window -d

# Tmux Plugin Manager (tpm), to install it, clone the repo below
# git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'

# set-option -g default-shell /bin/bash

# ----------------------------------------------------------------------------

# Catppuccin theme
# https://github.com/catppuccin/tmux
# Cons:
# - Doesn't have a sync panes like dracula
#   - Actually I was able to implement this, see below
# Pros:
# - I feel my terminal waaaaay smoother/faster, not completely sure about this
#   But could be due to all the refreshing and polling of data Dracula had to do

set -g @plugin 'catppuccin/tmux'
set -g @catppuccin_flavor 'mocha' # or frappe, macchiato, mocha

set -g @catppuccin_window_left_separator ""
set -g @catppuccin_window_right_separator " "
set -g @catppuccin_window_middle_separator " █"
set -g @catppuccin_window_number_position "right"

set -g @catppuccin_status_modules_left "session"

# set -g @catppuccin_status_modules_right "none"
# set -g @catppuccin_status_modules_right "directory"
# set -g @catppuccin_directory_text " linkarzu   If you like the video like it  , and remember to subscribe   "
# set -g @catppuccin_directory_color "#04d1f9"
# set -g @catppuccin_directory_icon "null"

# As 'man tmux' specifies:
# Execute the first command if shell-command (run with /bin/sh) returns success or the second command otherwise
if-shell 'test -f ~/github/dotfiles-latest/youtube-banner.txt' {
    set -g @catppuccin_status_modules_right "directory"
    set -g @catppuccin_directory_text " linkarzu   If you like the video like it  , and remember to subscribe   "
    set -g @catppuccin_directory_color "#04d1f9"
    set -g @catppuccin_directory_icon "null"
} {
    set -g @catppuccin_status_modules_right "null"
}

# `user` and `host` are kind of useless, dont change when you ssh to devices
# set -g @catppuccin_status_modules_right "directory user host"
set -g @catppuccin_status_left_separator " "
set -g @catppuccin_status_right_separator ""
set -g @catppuccin_status_right_separator_inverse "no"
set -g @catppuccin_status_connect_separator "no"

# set -g @catppuccin_directory_text "#{pane_current_path}"

## ELDRITCH COLORS
# Color of the ACTIVE window, windows are opened with ctrl+b c
set -g @catppuccin_window_current_color "#04d1f9"
# set -g @catppuccin_window_current_background ""

# Color of the rest of the windows that are not active
set -g @catppuccin_window_default_color "#02687c"
set -g @catppuccin_window_default_background "#212337"

# The following 2 colors are for the lines that separate tmux splits
set -g @catppuccin_pane_active_border_style "fg=#04d1f9"
set -g @catppuccin_pane_border_style "fg=#a5afc2"

# This can be set to "icon" or "all" if set to "all" the entire tmux session
# name has color
# set -g @catppuccin_status_fill "icon"
set -g @catppuccin_status_fill "all"
# This is the classic colored tmux bar that goes across the entire screen
# set -g @catppuccin_status_background "theme"
set -g @catppuccin_status_background "#212337"
# If you set this to off, the tmux line completely dissappears
set -g @catppuccin_status_default "on"

# default for catppuccin_session_color is #{?client_prefix,$thm_red,$thm_green}
# https://github.com/catppuccin/tmux/issues/140#issuecomment-1956204278
set -g @catppuccin_session_color "#{?client_prefix,#a48cf2,#37f499}"

# This sets the color of the window text, #W shows the application name
set -g @catppuccin_window_default_fill "number"
set -g @catppuccin_window_default_text "#[fg=#ebfafa]#W"

set -g @catppuccin_window_current_fill "number"
set -g @catppuccin_window_current_text "#[fg=#ebfafa]#W"

# Put this option below the '@catppuccin_window_current_text' option for it to
# override it, otherwise it won't work
# I got the 'window_zoomed_flag' tip from 'DevOps Toolbox' youtuber
# https://youtu.be/GH3kpsbbERo?si=4ZoV090qVbble7np
#
# Second option shows a message when panes are syncronized
set -g @catppuccin_window_current_text "#W#{?window_zoomed_flag,#[fg=#a48cf2] (   ),}#{?pane_synchronized,#[fg=#a48cf2] SYNCHRONIZED-PANES,}"

# ----------------------------------------------------------------------------

run '~/.tmux/plugins/tpm/tpm'
